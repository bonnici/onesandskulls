function injuryDiceToResult(e){if(2!=e.length)return null;var t=e[0]+e[1];return 8>t?0:10>t?1:2}function casualtyDiceToResult(e){return 1!=e.length?null:e[0]<=38?0:e[0]<=48?1:e[0]<=52?2:e[0]<=54?3:e[0]<=56?4:e[0]<=57?5:e[0]<=58?6:7}function initStats(e,t){if(!(t in e)){var r=rollTypeIdToDiceType(t);1==r&&(e[t]={diceType:1,expected:[1/6,1/6,1/6,1/6,1/6,1/6],0:{total:0,histogram:[0,0,0,0,0,0]},1:{total:0,histogram:[0,0,0,0,0,0]}})}}function rollTypeIdToDiceType(e){switch(e){case-2:return 2;case-1:return 6;case 1:return 1;case 2:return 1;case 3:return 3;case 4:return 4;case 5:return 0;case 6:return 1;case 7:return 1;case 8:return 5;case 9:return 1;case 10:return 2;case 11:return 7;case 12:return 1;case 16:return 1;case 17:return 1;case 20:return 1;case 21:return 1;case 22:return 1;case 23:return 1;case 24:return 1;case 26:return 2;case 29:return 1;case 27:return 1;case 31:return 1;case 34:return 3;case 36:return 1;case 37:return 1;case 40:return 1;case 42:return 1;case 46:return 1;case 54:return 1;case 55:return 1;case 56:return 1;case 58:return 2;default:return null}}stats={calculateStats:function(e,t){for(var r={standard:{diceType:1,0:{total:0,histogram:[0,0,0,0,0,0]},1:{total:0,histogram:[0,0,0,0,0,0]},expected:[1/6,1/6,1/6,1/6,1/6,1/6]},scatter:{diceType:2,0:{total:0,histogram:[0,0,0,0,0,0,0,0]},1:{total:0,histogram:[0,0,0,0,0,0,0,0]},expected:[1/8,1/8,1/8,1/8,1/8,1/8,1/8,1/8]},block:{diceType:0,0:{total:0,histogram:[0,0,0,0,0]},1:{total:0,histogram:[0,0,0,0,0]},expected:[1/6,1/6,2/6,1/6,1/6]},"1db":{diceType:0,0:{total:0,histogram:[0,0,0,0,0]},1:{total:0,histogram:[0,0,0,0,0]},expected:[1/6,1/6,2/6,1/6,1/6]},"2db":{diceType:-1,0:{total:0,histogram:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},1:{total:0,histogram:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},expected:[1/36,2/36,4/36,2/36,2/36,1/36,4/36,2/36,2/36,4/36,4/36,4/36,1/36,2/36,1/36]},armour:{diceType:3,0:{total:0,histogram:[0,0,0,0,0,0,0,0,0,0,0]},1:{total:0,histogram:[0,0,0,0,0,0,0,0,0,0,0]},expected:[1/36,2/36,3/36,4/36,5/36,6/36,5/36,4/36,3/36,2/36,1/36]},injury:{diceType:4,0:{total:0,histogram:[0,0,0,0,0,0,0,0,0,0,0]},1:{total:0,histogram:[0,0,0,0,0,0,0,0,0,0,0]},expected:[1/36,2/36,3/36,4/36,5/36,6/36,5/36,4/36,3/36,2/36,1/36]},casualty:{diceType:5,0:{total:0,histogram:[0,0,0,0,0,0,0,0]},1:{total:0,histogram:[0,0,0,0,0,0,0,0]},expected:[.5,1/6,2/48,2/48,2/48,1/48,1/48,1/6]},2:{diceType:1,0:{total:0,histogram:[0,0,0,0,0,0]},1:{total:0,histogram:[0,0,0,0,0,0]},expected:[1/6,1/6,1/6,1/6,1/6,1/6]}},a=0;a<e.length;a++){var c=e[a],i=c.team;c.player in t&&(i=t[c.player].teamId);var s=c.rollType,o=rollTypeIdToDiceType(s);if(null!==o){if(3==o){for(var l=0,n=0;n<c.dice.length;n++)l+=c.dice[n]-1;r.armour[i].total++,r.armour[i].histogram[l]++}else if(4==o){for(var l=0,n=0;n<c.dice.length;n++)l+=c.dice[n]-1;r.injury[i].total++,r.injury[i].histogram[l]++}else if(5==o){var u=casualtyDiceToResult(c.dice);null!==u&&(r.casualty[i].total++,r.casualty[i].histogram[u]++)}else if(null!==o)for(var n=0;n<c.dice.length;n++){var d,h=c.dice[n];0==o?d=r.block[i]:1==o||7==o?(h--,d=r.standard[i]):2==o&&(h--,d=r.scatter[i]),d&&(d.total++,d.histogram[h]++)}if(0===o){if(1==c.dice.length){var h=c.dice[0];r["1db"][i].total++,r["1db"][i].histogram[h]++}else if(2==c.dice.length){for(var g=Math.min(c.dice[0],c.dice[1]),m=Math.max(c.dice[0],c.dice[1]),p=0,y=g;y>0;y--)p+=y;var h=5*g+m-p;r["2db"][i].total++,r["2db"][i].histogram[h]++}}else if(1==o)if(c.dice.length>1);else{initStats(r,s);var h=c.dice[0]-1;r[s][i].total++,r[s][i].histogram[h]++}}}return r}};