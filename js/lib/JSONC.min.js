(function(){function r(r,e){var n,t=r.length;for(n=0;t>n;n++)if(r[n][1]===e)return!0;return!1}function e(e){var n,t=e.length,o=[];for(n=0;t>n;n++)r(o,e[n][1])||o.push(e[n]);return o}function n(r){return r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function t(r){return"[object Object]"===y.call(r)}function o(r){return"[object Array]"===y.call(r)}function u(r){var e,n,t={},o=r.length;for(e=0;o>e;e++)n=r[e],t[n[0]]=n[1];return t}function i(r,e,n){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=_!?()*",o=[],u=r;for(e=e||t.length,n=n||0;u>=e;)o.push(t.charCodeAt(u%e+n)),u=Math.floor(u/e-1);return o.push(t.charCodeAt(u+n)),o.reverse()}function c(r){return String.fromCharCode.apply(String,r)}function f(n,u){var a,p,s;for(p in n)n.hasOwnProperty(p)&&(s=n[p],(t(s)||o(s))&&(u=u.concat(e(f(s,u)))),isNaN(Number(p))&&(r(u,p)||(S+=1,a=[],a.push(c(i(S)),p),u.push(a))));return u}function a(r,e){var n,t;for(n=0,t=r.length;t>n;n++)r[n]=v.compress(r[n],e)}function p(r,t){var o,i,c,a,p,s;for(t=f(r,t),t=e(t),o=u(t),c=JSON.stringify(r),a=t.length,p=0;a>p;p++)i=t[p],c=c.replace(new RegExp(n('"'+i[1]+'"'),"g"),'"'+i[0]+'"');return s=JSON.parse(c),s._=o,s}function s(r){var e,n;for(e=0,n=r.length;n>e;e++)r[e]=v.decompress(r[e])}function l(r){var e,n,t;e=JSON.parse(JSON.stringify(r._)),delete r._,n=JSON.stringify(r);for(t in e)e.hasOwnProperty(t)&&(n=n.replace(new RegExp('"'+t+'"',"g"),'"'+e[t]+'"'));return n}function g(r){for(var e=0,n=r.length,t=[];n>e;e++)t.push(r.charCodeAt(e));return t}var h,d,v={},S=-1,y={}.toString;h=this,d="object"==typeof exports&&"object"==typeof module&&"object"==typeof module.exports&&"function"==typeof require,v.compress=function(r,e){e||(S=-1);var n,t=e||[];return o(r)?(a(r,t),n=r):n=p(r,t),n},v.pack=function(r,e){var n=JSON.stringify(e?v.compress(r):r);return Base64.encode(String.fromCharCode.apply(String,gzip.zip(n,{level:9})))},v.decompress=function(r){var e,n=JSON.parse(JSON.stringify(r));return o(n)?s(n):e=l(n),e?JSON.parse(e):n},v.unpack=function(r,e){var n=g(Base64.decode(r)),t=String.fromCharCode.apply(String,gzip.unzip(n,{level:9})),o=JSON.parse(t);return e?v.decompress(o):o},h.JSONC=v,d?module.exports=v:"undefined"!=typeof define&&define("jsoncomp",[],function(){return v})}).call(this);